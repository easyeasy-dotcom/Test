<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EasyEasy Ai Tools</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            max-width: 1000px;
            width: 100%;
            margin: 0 auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        /* Tab Navigation */
        .tab-nav {
            position: absolute;
            top: 20px;
            left: 20px;
            display: flex;
            gap: 10px;
            z-index: 10;
        }

        .tab-btn {
            background: rgba(0,0,0,0.15);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 15px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .tab-btn:hover {
            background: rgba(0,0,0,0.3);
            transform: translateY(-2px);
        }

        .tab-btn.active {
            background: white;
            color: #667eea;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            text-align: center;
            font-size: 2.5em;
            padding-top: 30px; /* Space for tabs */
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        /* Main Tab Styles (original purple theme) */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .quote-container {
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
            text-align: center;
            color: #333;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .quote {
            font-style: italic;
            font-size: 1.4em;
            margin-bottom: 12px;
            line-height: 1.6;
        }

        .quote-author {
            font-weight: 600;
            font-size: 1.1em;
            opacity: 0.9;
        }

        .welcome-message {
            text-align: center;
            color: #333;
            font-size: 1.3em;
            margin-bottom: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 15px;
            min-height: 80px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
        }

        .milestones {
            margin-top: 12px;
            font-size: 1.1em;
            font-weight: bold;
        }

        .badge {
            display: inline-block;
            background: #ff6b6b;
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            margin: 4px;
            font-size: 0.9em;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* More Data Tab Styles (new teal/coral theme) */
        .more-data-header {
            text-align: center;
            margin: 40px 0 50px;
        }

        .more-data-header h1 {
            font-size: 2.8em;
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            padding-top: 0;
        }

        .advanced-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 25px;
        }

        .advanced-card {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            color: #333;
            padding: 30px;
            border-radius: 18px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .advanced-value {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .advanced-label {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .progress-bar {
            height: 20px;
            background: #eee;
            border-radius: 10px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #ff9a9e);
            border-radius: 10px;
            transition: width 1s ease;
        }

        /* Shared */
        .chart-container {
            position: relative;
            height: 400px;
            margin-bottom: 40px;
        }

        .chart-title {
            text-align: center;
            font-size: 1.3em;
            color: #333;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .date-selector, .period-selector, .button-group {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .period-btn {
            padding: 10px 25px;
            font-size: 0.95em;
        }

        .period-btn.active {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
        }

        @media (max-width: 600px) {
            .container { padding: 20px; }
            h1 { font-size: 2em; }
            .stat-number, .advanced-value { font-size: 2em; }
            .tab-nav { position: static; margin-bottom: 20px; justify-content: center; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Tab Navigation -->
        <div class="tab-nav">
            <button class="tab-btn active" onclick="openTab('main')">Dashboard</button>
            <button class="tab-btn" onclick="openTab('more')">More Data ‚Üí</button>
        </div>

        <!-- Main Dashboard Tab -->
        <div id="main" class="tab-content active">
            <h1>üìä EasyEasy Ai Tools</h1>
            <p class="subtitle">Your Personal Smoking Reduction Helper</p>
            
            <div class="welcome-message" id="welcomeMessage">Loading your journey...</div>

            <div class="quote-container">
                <div class="quote" id="quoteText"></div>
                <div class="quote-author" id="quoteAuthor"></div>
            </div>
            
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number" id="totalVisits">0</div>
                    <div class="stat-label">Total Visits</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="streakDays">0</div>
                    <div class="stat-label">Current Streak üî•</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="daysLogged">0</div>
                    <div class="stat-label" id="daysLoggedLabel">Days Logged</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="currentTime">--:--</div>
                    <div class="stat-label">Current Time</div>
                </div>
            </div>

            <div class="period-selector">
                <button class="period-btn active" onclick="changePeriod(30)">Last 30 Days</button>
                <button class="period-btn" onclick="changePeriod(40)">Last 40 Days</button>
                <button class="period-btn" onclick="changePeriod(50)">Last 50 Days</button>
            </div>

            <h3 class="chart-title">üïê Visit Times Throughout the Day</h3>
            <div class="date-selector">
                <label for="dateFilter">Select Date:</label>
                <input type="date" id="dateFilter" onchange="filterByDate()">
                <button onclick="showAllDates()">Show All Dates</button>
            </div>
            <div class="chart-container">
                <canvas id="visitChart"></canvas>
            </div>

            <h3 class="chart-title">üìÖ Login Activity Tracker</h3>
            <div class="chart-container">
                <canvas id="activityChart"></canvas>
            </div>

            <div class="button-group">
                <button onclick="addTestData()">Add Test Data</button>
                <button onclick="clearData()">Clear All Data</button>
                <button onclick="exportData()">Export Data</button>
            </div>
        </div>

        <!-- More Data Tab -->
        <div id="more" class="tab-content">
            <div class="more-data-header">
                <h1>üìä Advanced Insights</h1>
                <p style="color:#666; font-size:1.2em; margin-top:15px;">Deep dive into your habits</p>
            </div>

            <div class="advanced-stats" id="advancedStats">
                <!-- Filled dynamically by JS -->
            </div>
        </div>
    </div>

    <script>
        // Quotes
        const quotes = [
            { text: "The secret of change is to focus all your energy not on fighting the old, but on building the new.", author: "Socrates" },
            { text: "You don‚Äôt have to be extreme, just consistent.", author: "Unknown" },
            { text: "Small steps every day lead to big changes over time.", author: "Unknown" },
            { text: "The best time to start was yesterday. The next best time is now.", author: "Unknown" },
            { text: "Progress, not perfection.", author: "Unknown" },
            { text: "Every day is a new chance to improve.", author: "Unknown" },
            { text: "You are stronger than your strongest excuse.", author: "Unknown" },
            { text: "One day or day one. You decide.", author: "Unknown" },
            { text: "It‚Äôs hard to beat a person who never gives up.", author: "Babe Ruth" },
            { text: "Believe you can and you're halfway there.", author: "Theodore Roosevelt" },
            { text: "The journey of a thousand miles begins with a single step.", author: "Lao Tzu" },
            { text: "Success is the sum of small efforts repeated day in and day out.", author: "Robert Collier" },
            { text: "Fall seven times, stand up eight.", author: "Japanese Proverb" },
            { text: "Your future is created by what you do today, not tomorrow.", author: "Unknown" },
            { text: "Great things never come from comfort zones.", author: "Unknown" },
            { text: "The only limit is the one you set yourself.", author: "Unknown" },
            { text: "Difficult roads often lead to beautiful destinations.", author: "Unknown" },
            { text: "Keep going. You are getting there.", author: "Unknown" },
            { text: "Every accomplishment starts with the decision to try.", author: "John F. Kennedy" },
            { text: "You are capable of amazing things.", author: "Unknown" },
            { text: "Today‚Äôs struggle is tomorrow‚Äôs strength.", author: "Unknown" },
            { text: "The comeback is always stronger than the setback.", author: "Unknown" },
            { text: "You‚Äôve survived 100% of your worst days. You‚Äôre doing great.", author: "Unknown" },
            { text: "Little by little, a little becomes a lot.", author: "Unknown" },
            { text: "Choose progress over perfection.", author: "Unknown" },
            { text: "You‚Äôre not giving up. You‚Äôre growing.", author: "Unknown" }
            // Add more if you want ‚Äî we have 26 here
        ];

        let visitChart, activityChart;
        let visits = [];
        let currentPeriod = 30;
        let selectedDate = null;

        // Tab switching
        function openTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            if (tabName === 'more') updateAdvancedStats();
        }

        async function init() {
            await loadVisits();
            await logVisit();
            displayQuote();
            updateWelcomeMessage();
            updateStats();
            setDefaultDate();
            createVisitChart();
            createActivityChart();
            updateClock();
            setInterval(updateClock, 1000);

            // Initial advanced stats if needed
            if (document.getElementById('more').classList.contains('active')) {
                updateAdvancedStats();
            }
        }

        async function loadVisits() {
            const stored = localStorage.getItem('visit-times');
            if (stored) visits = JSON.parse(stored);
        }

        async function saveVisits() {
            localStorage.setItem('visit-times', JSON.stringify(visits));
        }

        async function logVisit() {
            const now = new Date();
            const todayStr = now.toLocaleDateString();
            if (!visits.some(v => v.date === todayStr)) {
                visits.push({
                    timestamp: now.toISOString(),
                    date: todayStr,
                    time: now.toLocaleTimeString()
                });
                await saveVisits();
            }
        }

        function getTimeGreeting() {
            const hour = new Date().getHours();
            if (hour >= 6 && hour < 12) return "‚òÄÔ∏è Good morning!";
            if (hour >= 12 && hour < 18) return "üå§Ô∏è Good afternoon!";
            if (hour >= 18 || hour < 6) return hour >= 18 ? "üåô Good evening!" : "üåü Burning the midnight oil?";
            return "üëã Hello!";
        }

        function getStreak() {
            if (visits.length === 0) return 0;
            const dates = [...new Set(visits.map(v => v.date))].sort().reverse();
            let streak = 0;
            const today = new Date().toLocaleDateString();
            let expected = new Date();

            while (true) {
                const expectedStr = expected.toLocaleDateString();
                if (dates.includes(expectedStr)) {
                    streak++;
                    expected.setDate(expected.getDate() - 1);
                } else if (expectedStr === today) {
                    expected.setDate(expected.getDate() - 1);
                } else {
                    break;
                }
            }
            return streak;
        }

        function getMilestones() {
            const total = visits.length;
            const streak = getStreak();
            const badges = [];
            if (total === 1) badges.push("üéâ First Visit!");
            if (total >= 10) badges.push("‚≠ê 10 Visits");
            if (total >= 50) badges.push("üí™ 50 Visits");
            if (total >= 100) badges.push("üî• 100 Visits");
            if (total >= 500) badges.push("üèÜ 500 Visits");
            if (total >= 1000) badges.push("üåü Legend!");

            if (streak >= 7) badges.push("üî• 7-Day Streak");
            if (streak >= 30) badges.push("üíé 30-Day Streak");
            if (streak >= 100) badges.push("ü¶æ 100-Day Streak");

            return badges;
        }

        function updateWelcomeMessage() {
            const greeting = getTimeGreeting();
            const total = visits.length;
            const streak = getStreak();
            const base = total === 1 
                ? `${greeting}<br>üéâ Welcome! This is your first visit!`
                : `${greeting}<br>üëã Welcome back! Visit #${total} ‚Ä¢ Streak: ${streak} days üî•`;

            const badges = getMilestones();
            const badgeHtml = badges.length ? `<div class="milestones">${badges.map(b => `<span class="badge">${b}</span>`).join('')}</div>` : '';

            document.getElementById('welcomeMessage').innerHTML = base + badgeHtml;
        }

        function displayQuote() {
            const q = quotes[Math.floor(Math.random() * quotes.length)];
            document.getElementById('quoteText').textContent = `‚Äú${q.text}‚Äù`;
            document.getElementById('quoteAuthor').textContent = `‚Äî ${q.author}`;
        }

        function updateStats() {
            document.getElementById('totalVisits').textContent = visits.length;
            document.getElementById('streakDays').textContent = getStreak();
            const uniqueDays = new Set(visits.map(v => v.date)).size;
            document.getElementById('daysLogged').textContent = `${uniqueDays}/${currentPeriod}`;
        }

        function updateClock() {
            document.getElementById('currentTime').textContent = new Date().toLocaleTimeString();
        }

        function setDefaultDate() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('dateFilter').value = today;
            selectedDate = new Date().toLocaleDateString();
        }

        function filterByDate() {
            const val = document.getElementById('dateFilter').value;
            selectedDate = val ? new Date(val).toLocaleDateString() : null;
            createVisitChart();
        }

        function showAllDates() {
            selectedDate = null;
            document.getElementById('dateFilter').value = '';
            createVisitChart();
        }

        function changePeriod(days) {
            currentPeriod = days;
            document.querySelectorAll('.period-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            updateStats();
            createActivityChart();
        }

        function createVisitChart() {
            const ctx = document.getElementById('visitChart').getContext('2d');
            let filtered = selectedDate ? visits.filter(v => v.date === selectedDate) : visits;

            const byHour = {};
            filtered.forEach(v => {
                const h = new Date(v.timestamp).getHours();
                byHour[h] = (byHour[h] || 0) + 1;
            });

            const labels = Object.keys(byHour).sort((a,b) => a-b).map(h => `${h}:00`);
            const data = labels.map(h => byHour[parseInt(h)]);

            if (visitChart) visitChart.destroy();

            visitChart = new Chart(ctx, {
                type: 'line',
                data: { labels, datasets: [{ label: 'Visits', data, borderColor: '#667eea', backgroundColor: 'rgba(102,126,234,0.1)', fill: true, tension: 0.4 }] },
                options: { responsive: true, maintainAspectRatio: false, plugins: { title: { display: true, text: labels.length ? (selectedDate || 'All Times') : 'No data' } }, scales: { y: { beginAtZero: true } } }
            });
        }

        function createActivityChart() {
            const ctx = document.getElementById('activityChart').getContext('2d');
            const now = new Date();
            const labels = [], data = [];

            for (let i = currentPeriod - 1; i >= 0; i--) {
                const d = new Date(now);
                d.setDate(d.getDate() - i);
                const str = d.toLocaleDateString();
                labels.push(str);
                data.push(visits.some(v => v.date === str) ? 1 : 0);
            }

            if (activityChart) activityChart.destroy();

            activityChart = new Chart(ctx, {
                type: 'bar',
                data: { labels, datasets: [{ label: 'Active', data, backgroundColor: data.map(v => v ? '#764ba2' : '#ddd' ) }] },
                options: { responsive: true, maintainAspectRatio: false, scales: { y: { max: 1, ticks: { callback: v => v ? '‚úì' : '‚úó' } } } }
            });
        }

        // Advanced Stats for More Data tab
        function updateAdvancedStats() {
            if (visits.length === 0) {
                document.getElementById('advancedStats').innerHTML = `<p style="grid-column:1/-1; text-align:center; font-size:1.5em; color:#999;">No data yet ‚Äî keep visiting!</p>`;
                return;
            }

            // Most active hour
            const hours = {};
            visits.forEach(v => {
                const h = new Date(v.timestamp).getHours();
                hours[h] = (hours[h] || 0) + 1;
            });
            const peak = Object.keys(hours).reduce((a,b) => hours[a] > hours[b] ? a : b);
            const peakTime = `${peak}:00 - ${parseInt(peak)+1}:00`;

            // Avg visits/day
            const uniqueDays = new Set(visits.map(v => v.date)).size;
            const avg = (visits.length / uniqueDays).toFixed(1);

            // Favorite day of week
            const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            const dayCount = {};
            visits.forEach(v => {
                const d = new Date(v.timestamp).getDay();
                dayCount[days[d]] = (dayCount[days[d]] || 0) + 1;
            });
            const favDay = Object.keys(dayCount).reduce((a,b) => dayCount[a] > dayCount[b] ? a : b);

            // Today's progress toward 3 visits
            const today = new Date().toLocaleDateString();
            const todayCount = visits.filter(v => v.date === today).length;
            const progress = Math.min(100, (todayCount / 3) * 100);

            const html = `
                <div class="advanced-card">
                    <div class="advanced-value">${peakTime}</div>
                    <div class="advanced-label">Most Active Time</div>
                </div>
                <div class="advanced-card">
                    <div class="advanced-value">${avg}</div>
                    <div class="advanced-label">Avg Visits Per Day</div>
                </div>
                <div class="advanced-card">
                    <div class="advanced-value">${favDay}</div>
                    <div class="advanced-label">Favorite Day</div>
                </div>
                <div class="advanced-card">
                    <div class="advanced-value">${todayCount}/3</div>
                    <div class="advanced-label">Today's Goal</div>
                    <div class="progress-bar"><div class="progress-fill" style="width:${progress}%"></div></div>
                </div>
            `;

            document.getElementById('advancedStats').innerHTML = html;
        }

        async function addTestData() {
            const now = new Date();
            for (let i = 0; i < 20; i++) {
                const daysAgo = Math.floor(Math.random() * 40);
                const date = new Date(now);
                date.setDate(date.getDate() - daysAgo);
                const count = Math.floor(Math.random() * 5) + 1;
                for (let j = 0; j < count; j++) {
                    const hour = Math.floor(Math.random() * 18) + 6;
                    const ts = new Date(date);
                    ts.setHours(hour, Math.random() * 60);
                    visits.push({
                        timestamp: ts.toISOString(),
                        date: date.toLocaleDateString(),
                        time: ts.toLocaleTimeString()
                    });
                }
            }
            await saveVisits();
            location.reload();
        }

        function clearData() {
            if (confirm('Clear all data? This cannot be undone.')) {
                visits = [];
                localStorage.removeItem('visit-times');
                location.reload();
            }
        }

        function exportData() {
            const blob = new Blob([JSON.stringify(visits, null, 2)], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'easy-visits.json';
            a.click();
        }

        init();
    </script>
</body>
</html>
